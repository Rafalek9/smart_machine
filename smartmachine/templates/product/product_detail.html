

{% extends "_main_.html" %}



{% block title %}Wyprodukowane komponenty | ETS{% endblock %}


{% load static %}



{% block undo %}<a class="nav-link" href="/products/" role="button"><i class="fas fa-arrow-left"></i></a>{% endblock %}


{% block content %}



<!-- Message -->
{% if messages %}
<ul class="messages">
    {% for message in messages %}
        <li class="{{ message.tags }}">
        {% if 'safe' in message.tags %}{{ message|safe }}{% else %}{{ message }}{% endif %}
        </li>
    {% endfor %}
</ul>
{% endif %}
<!-- / Message -->





<section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
              <h1>Szczegóły komponentu <a href="#">{{part.part_number}}</a></h1>

          </div>

            <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
                <a href="/products/{{part.pk}}/print/"><button type="button bnt-sm" class="btn btn-secondary"><i class="fas fa-print"></i>&nbsp;&nbsp;Raport</button></a>
            </ol>
          </div><!-- /.col -->

        </div>
      </div><!-- /.container-fluid -->
    </section>





    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">



		<div class="row">


            <div class="col-lg-12 col-12">

                <div class="card">



                  <div class="card-body">

                      <div class="row">


						  <style>
                              .inspect-icon-ok { margin-right: 10px;  color: #2ECC71!important;}
                              .inspect-icon-nok { margin-right: 10px; color: #E74C3C!important;}
                              .inspect-description { margin-top: 10px!important; margin-left: 20px;}
                              .inspect { margin-top: 20px!important;}
                           /* .image-ok {border-style: solid; border-radius: 2%; border-color: #58D68D; border-width: 4px;}  */
                           /* .image-nok {border-style: solid; border-radius: 2%; border-color: #E74C3C; border-width: 4px;} */
						 </style>






                          <div class="col-12">
                            <h3 class="card-title">Inspekcje wizyjne:</h3>
                            <br>
                            <br>

							  <div class="row">



                                <!-- LIGHTBOX -->

                                <style>

                                * {
                                  box-sizing: border-box;
                                }

                                .row > .column {
                                  padding: 0 8px;
                                }

                                .row:after {
                                  content: "";
                                  display: table;
                                  clear: both;
                                }

                                .column {
                                  float: left;
                                  width: 300px;
                                }


                                .column_sm {
                                    display: inline!important;
                                    float: left;
                                    width: 150px;
                                }


                                 .small_row {
                                    display: inline!important;
                                    background-color: black;

                                 }

                                /* The Modal (background) */
                                .modal {
                                  display: none;
                                  position: fixed;
                                  z-index: 2040;
                                  padding-top: 100px;
                                  left: 0;
                                  top: 0;
                                  width: 100%;
                                  height: 100%;
                                  overflow: auto;
                                  background-color: black;
                                }

                                /* Modal Content */
                                .modal-content {
                                  position: relative;
                                  background-color: #fefefe;
                                  margin: auto;
                                  padding: 0;
                                  width: 800;

                                }

                                /* The Close Button */
                                .close {
                                  color: white;
                                  position: absolute;
                                  top: 10px;
                                  right: 25px;
                                  font-size: 42px;
                                  font-weight: bold;
                                }

                                #inspect_mode {
                                  color: white;

                                  font-size: 15px;

                                }

                                .close:hover,
                                .close:focus {
                                  color: #999;
                                  text-decoration: none;
                                  cursor: pointer;
                                }


                                /* The Close Button */
                                .inspect {
                                  color: green;
                                  position: absolute;
                                  top: 2px;
                                  right: 65px;
                                  font-size: 23px;
                                  font-weight: bold;
                                }

                                .inspect:hover,
                                .inspect:focus {
                                  color: #999;
                                  text-decoration: none;
                                  cursor: pointer;
                                }

                                .mySlides {
                                  display: none;
                                }

                                .cursor {
                                  cursor: pointer;
                                }

                                /* Next & previous buttons */
                                .prev,
                                .next {
                                  cursor: pointer;
                                  position: absolute;
                                  top: 45%;

                                  width: auto;
                                  padding: 16px;
                                  margin-top: -50px;
                                  color: white!important;
                                  font-weight: bold;
                                  font-size: 20px;
                                  transition: 0.6s ease;
                                  border-radius: 5px;
                                  user-select: none;
                                  -webkit-user-select: none;
                                }

                                /* Position the "next button" to the right */
                                .next {
                                  right: -50;
                                  border-radius: 5px;
                                }

                                /* Position the "next button" to the right */
                                .prev {
                                  left: -50;
                                  border-radius: 5px;
                                }

                                /* On hover, add a black background color with a little bit see-through */
                                .prev:hover,
                                .next:hover {
                                  background-color: rgba(255, 255, 255, 0.3);
                                }

                                /* Number text (1/3 etc) */
                                .numbertext {
                                  color: #f2f2f2;
                                  font-size: 12px;
                                  padding: 8px 12px;
                                  position: absolute;
                                  top: 0;
                                }

                                img {
                                  margin-bottom: -4px;
                                }

                                .caption-container {
                                  text-align: center;
                                  background-color: black;
                                  padding: 2px 16px;
                                  color: white;
                                }

                                .demo {
                                  opacity: 0.6;
                                }

                                .active,
                                .demo:hover {
                                  opacity: 1;
                                }

                                img.hover-shadow {
                                  transition: 0.3s;
                                }

                                .hover-shadow:hover {
                                  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                                }

                                .jpg {
                                  position: absolute;
                                  max-height: 300px;
                                  max-width: 300px;
                                }

                                .svg {
                                  position: relative;
                                }

                                .good {
                                   border-style: solid;
                                   border-color: green;
                                   border-width: 3px;
                                   border-radius: 4px;
                                }

                                .bad {
                                   border-style: solid;
                                   border-color: red;
                                   border-width: 3px;
                                   border-radius: 4px;
                                }

                                </style>



                                <div class="row">



                                    {% for img in images %}
                                          <div class="column">
                                            <img src="/media/{{ img.image }}" style="width:100%;" onclick="openModal();currentSlide( {{ forloop.counter }} )" class="hover-shadow cursor {% if img.status %} good {% else %} bad {% endif %}">
                                            {{ img.camera.name }}
                                          </div>
                                    {% empty %}
                                        <div class="column ml-3" style="color:gray;">
                                            <strong>Brak zapisanych zdjęć</strong>
                                        </div>
                                    {% endfor %}
                                </div>



                                <div id="myModal" class="modal">
                                  <span class="close cursor" onclick="closeModal()">&times;</span>
                                    <span class="inspect cursor" onclick="HideInspect()"><a id="inspect_mode"></a><i class="fas fa-vector-square"></i></span>



                                  <div class="modal-content">


                                        {% for img in images %}
                                            <div class="mySlides">
                                              <div class="numbertext">{{ img.camera.name }}</div>
                                              <img src="/media/{{ img.image }}" style="position: absolute; width: 800px; height: 600px;">
                                              <img src="/media/{{ img.inspect }}" style="position: relative; width: 800px; height: 600px;" class="insp" id="insp">
                                            </div>
                                        {% endfor %}



                                    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                                    <a class="next" onclick="plusSlides(1)">&#10095;</a>

                                    <div class="caption-container">
                                      <p id="caption"></p>
                                    </div>



                                      <div class="small_row">
                                            {% for img in images %}
                                                <div class="column_sm">
                                                    <img class="demo cursor {% if img.status %} good {% else %} bad {% endif %}" src="/media/{{ img.image }}" style="width: 100%; margin-right: 10px!important;" onclick="currentSlide( {{ forloop.counter }} )" alt="{{ img.camera.name }}">
                                                </div>
                                            {% endfor %}
                                      </div>





                                    </div>
                                </div>

                                <script>
                                function openModal() {
                                  document.getElementById("myModal").style.display = "block";
                                }

                                function closeModal() {
                                  document.getElementById("myModal").style.display = "none";
                                }

                                var slideIndex = 1;
                                showSlides(slideIndex);

                                function plusSlides(n) {
                                  showSlides(slideIndex += n);
                                }

                                function currentSlide(n) {
                                  showSlides(slideIndex = n);
                                }

                                function showSlides(n) {
                                  var i;
                                  var slides = document.getElementsByClassName("mySlides");
                                  var dots = document.getElementsByClassName("demo");
                                  var captionText = document.getElementById("caption");
                                  if (n > slides.length) {slideIndex = 1}
                                  if (n < 1) {slideIndex = slides.length}
                                  for (i = 0; i < slides.length; i++) {
                                      slides[i].style.display = "none";
                                  }
                                  for (i = 0; i < dots.length; i++) {
                                      dots[i].className = dots[i].className.replace(" active", "");
                                  }
                                  slides[slideIndex-1].style.display = "block";
                                  dots[slideIndex-1].className += " active";
                                  captionText.innerHTML = dots[slideIndex-1].alt;
                                }

                                function HideInspect() {



                                    if ( $(insp).css("visibility") == "visible" ) {
                                      $(".insp").css('visibility', 'hidden');
                                      $(".inspect").css('color', 'grey');
                                    } else {
                                        $(".insp").css('visibility', 'visible');
                                        $(".inspect").css('color', 'green');
                                    }

                                }


                                </script>

                             <!-- LIGHTBOX -->


							  </div>

                          </div>

                      </div>

                  </div><!-- /.card-body -->
                </div>
                <!-- /.card -->
            </div>
            <div class="col-12 col-lg-4">

                <div class="card">



                  <div class="card-body">

                      <div class="row">

                          <div class="col-12">
                              <h3 class="card-title">Szczegóły:</h3>
                              <br><br>
                              <table class="table">
                                  <tbody>


                                    <tr>
                                      <th style="width: 50%">Kod</th>
                                      <td>{{ part.part_number }}</td>
                                    </tr>


                                    <tr>
                                      <th>Referencja</th>
                                        <td><a href="/reference/{{part.reference.id}}">{{ part.reference }}</a></td>
                                    </tr>


                                    <tr>
                                      <th>Status</th>
                                      <td>{% if part.OK %}<i class="fas fa-check" style="color: green;"></i>{% else %}<i class="fas fa-times" style="color: red;"></i>{% endif %}</td>
                                    </tr>



                                 <tr>
                                      <th>Data produkcji</th>
                                      <td>{{ part.create_date }}</td>
                                    </tr>


                                  <tr>
                                      <th>Operator</th>
                                      <td>{{ part.operator }}</td>
                                    </tr>


                                  <tr>
                                      <th>Czas cyklu</th>
                                      <td>{{ part.cycle_time }}</td>
                                  </tr>





                                    {% for field in fields %}
                                        <tr>
                                              <th>{{ field.field.name }}</th>
                                              <td>{{ field.value }}</td>
                                        </tr>
                                    {% endfor %}

                                  </tbody>

                                </table>

                          </div>




						  <style>
									  .inspect-icon-ok { margin-right: 10px; color: green!important;}
									  .inspect-icon-nok { margin-right: 10px;  color: red!important;}
									  .inspect-description { margin-top: 10px!important;}

									  @media print
                                        {
                                           .dark-header {
                                            padding-top: 10px;
                                                background-color: #282828;
                                                color: white;
                                            }
                                        }
						 </style>
                    </div>

                  </div><!-- /.card-body -->
                </div>
                <!-- /.card -->
            </div>







        </div>



      </div>
    </section>
    <!-- /.content -->
  </div>

{% endblock %}





{% block script %}

    <script src="{% static 'bootstrap-datepicker/js/bootstrap-datepicker.min.js' %} "></script>
    <script src="{% static 'bootstrap-datepicker/locales/bootstrap-datepicker.pl.min.js' %} "></script>

    <!-- ADD SCRIPT-->
   {% include "product/script.html" %}

{% endblock %}






